<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 text-gray-800">Missões e Desafios</h1>
    <%= link_to "Nova Missão", new_gamification_challenge_path, class: "btn btn-primary" %>
  </div>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Título</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Prêmio</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Período</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Status</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @challenges.each do |challenge| %>
            <tr>
            <td class="px-4 py-3 align-middle">
              <div class="fw-bold text-dark"><%= challenge.title %></div>
              <div class="text-muted small"><%= truncate(challenge.description, length: 50) %></div>
            </td>
            <td class="px-4 py-3 align-middle">
              <span class="badge bg-info text-dark">
                <%= challenge.reward %>
              </span>
            </td>
            <td class="px-4 py-3 align-middle">
              <div class="text-dark small">
                <%= challenge.starts_at.strftime("%d/%m/%Y") %> - <%= challenge.ends_at.strftime("%d/%m/%Y") %>
              </div>
            </td>
            <td class="px-4 py-3 align-middle">
              <% if Time.current < challenge.starts_at %>
                <span class="badge bg-warning text-dark">Agendado</span>
              <% elsif Time.current > challenge.ends_at %>
                <span class="badge bg-danger">Encerrado</span>
              <% else %>
                <span class="badge bg-success">Ativo</span>
              <% end %>
            </td>
            <td class="px-4 py-3 align-middle">
              <%= link_to "Editar", edit_gamification_challenge_path(challenge), class: "btn btn-sm btn-outline-primary me-2" %>
              <%= link_to "Excluir", gamification_challenge_path(challenge), data: { turbo_method: :delete, turbo_confirm: "Tem certeza?" }, class: "btn btn-sm btn-outline-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
