<%= form_with(model: [:mobile, evento], local: true) do |f| %>
  <% if evento.errors.any? %>
    <div class="alert alert-danger rounded-3 border-0 mb-3 shadow-sm">
      <div class="d-flex align-items-center mb-2">
        <i class="bi bi-exclamation-circle-fill me-2 fs-5"></i>
        <span class="fw-bold">Atenção</span>
      </div>
      <ul class="mb-0 ps-3 small">
        <% evento.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Informações Básicas -->
  <div class="mobile-card mb-3 shadow-sm">
    <div class="p-4">
      <div class="d-flex align-items-center mb-4">
        <div class="icon-box bg-soft-primary rounded-circle me-3" style="width: 40px; height: 40px;">
          <i class="bi bi-info-circle-fill text-primary"></i>
        </div>
        <h6 class="fw-bold text-dark mb-0">Informações Básicas</h6>
      </div>
      
      <div class="mb-3">
        <%= f.label :titulo, "Título do Evento", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-type-h1 position-absolute top-50 start-0 translate-middle-y ms-3 text-muted fs-5"></i>
          <%= f.text_field :titulo, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "Ex: Caminhada" %>
        </div>
        <div class="form-text ms-1 text-muted small">Dê um nome curto e chamativo.</div>
      </div>

      <div class="mb-3">
        <%= f.label :data, "Data e Hora", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-calendar-event position-absolute top-50 start-0 translate-middle-y ms-3 text-muted fs-5"></i>
          <%= f.datetime_field :data, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "Data e Hora" %>
        </div>
      </div>

      <div class="mb-3">
        <%= f.label :local, "Local", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-geo-alt position-absolute top-50 start-0 translate-middle-y ms-3 text-muted fs-5"></i>
          <%= f.text_field :local, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "Ex: Praça Central" %>
        </div>
        <div class="form-text ms-1 text-muted small">Onde será realizado?</div>
      </div>

      <div class="mb-3">
        <%= f.label :descricao, "Descrição", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-card-text position-absolute top-0 start-0 mt-3 ms-3 text-muted fs-5"></i>
          <%= f.text_area :descricao, style: "height: 100px;", class: "form-control form-control-lg ps-5 pt-3 bg-light border-0", placeholder: "Detalhes do evento..." %>
        </div>
        <div class="form-text ms-1 text-muted small">Detalhes importantes para os participantes.</div>
      </div>
      
      <div class="mb-1">
        <label class="form-label fw-bold text-dark small">Organizador</label>
        <div class="position-relative">
          <i class="bi bi-person-badge position-absolute top-50 start-0 translate-middle-y ms-3 text-muted fs-5"></i>
          <input type="text" class="form-control form-control-lg ps-5 bg-light border-0 text-muted" value="<%= evento.coordenador&.nome || Current.apoiador.nome %>" disabled readonly>
        </div>
      </div>
    </div>
  </div>

  <!-- Redes Sociais -->
  <div class="mobile-card mb-3 shadow-sm">
    <div class="p-4">
      <div class="d-flex align-items-center mb-4">
        <div class="icon-box bg-soft-info rounded-circle me-3" style="width: 40px; height: 40px;">
          <i class="bi bi-share-fill text-info"></i>
        </div>
        <div>
          <h6 class="fw-bold text-dark mb-0">Redes Sociais</h6>
          <small class="text-muted">Opcional</small>
        </div>
      </div>
      
      <div class="mb-3">
        <%= f.label :link_whatsapp, "Link WhatsApp", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-whatsapp position-absolute top-50 start-0 translate-middle-y ms-3 text-success fs-5"></i>
          <%= f.text_field :link_whatsapp, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "https://wa.me/..." %>
        </div>
      </div>

      <div class="mb-3">
        <%= f.label :link_instagram, "Link Instagram", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-instagram position-absolute top-50 start-0 translate-middle-y ms-3 text-danger fs-5"></i>
          <%= f.text_field :link_instagram, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "https://instagram.com/..." %>
        </div>
      </div>
      
      <div class="mb-3">
        <%= f.label :link_facebook, "Link Facebook", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-facebook position-absolute top-50 start-0 translate-middle-y ms-3 text-primary fs-5"></i>
          <%= f.text_field :link_facebook, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "https://facebook.com/..." %>
        </div>
      </div>

      <div class="mb-3">
        <%= f.label :link_tiktok, "Link TikTok", class: "form-label fw-bold text-dark small" %>
        <div class="position-relative">
          <i class="bi bi-tiktok position-absolute top-50 start-0 translate-middle-y ms-3 text-dark fs-5"></i>
          <%= f.text_field :link_tiktok, class: "form-control form-control-lg ps-5 bg-light border-0", placeholder: "https://tiktok.com/..." %>
        </div>
      </div>
    </div>
  </div>

  <!-- Público Alvo -->
  <div class="mobile-card mb-4 shadow-sm" data-controller="location-select">
    <div class="p-4">
      <div class="d-flex align-items-center mb-3">
        <div class="icon-box bg-soft-warning rounded-circle me-3" style="width: 40px; height: 40px;">
          <i class="bi bi-bullseye text-warning"></i>
        </div>
        <div>
          <h6 class="fw-bold text-dark mb-0">Público Alvo</h6>
          <small class="text-muted">Quem deve ver este evento?</small>
        </div>
      </div>
      
      <div class="alert alert-light border-0 bg-light rounded-3 mb-3">
        <div class="d-flex">
          <i class="bi bi-info-circle text-muted me-2 mt-1"></i>
          <small class="text-muted">Deixe os campos em branco para convidar todos os apoiadores.</small>
        </div>
      </div>

      <%= render partial: "location_fields", locals: { 
            form: f, 
            wrapper_class: "mb-3", 
            select_class: "form-select form-control-lg rounded-3 border-0 bg-light", 
            label_class: "form-label fw-bold small text-dark",
            include_containers: true 
          } %>
    </div>
  </div>

  <div class="d-grid gap-2 mb-5">
    <%= f.submit "Salvar Evento", class: "btn btn-gradient btn-lg shadow-glow-primary fw-bold py-3" %>
    <%= link_to "Cancelar", mobile_eventos_path, class: "btn btn-light btn-lg text-muted fw-bold py-3" %>
  </div>
<% end %>
