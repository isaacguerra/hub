<div class="d-flex align-items-center mb-4">
  <%= link_to mobile_visitas_path, class: "btn btn-link text-dark p-0 me-3" do %>
    <i class="bi bi-arrow-left fs-4"></i>
  <% end %>
  <h5 class="fw-bold mb-0">Nova Visita</h5>
</div>

<div class="card bg-info bg-opacity-10 border-info border-opacity-25 mb-4">
  <div class="card-body">
    <div class="d-flex">
      <div class="me-3">
        <i class="bi bi-info-circle-fill fs-3 text-info"></i>
      </div>
      <div>
        <h6 class="fw-bold text-info mb-2">Sobre as Visitas</h6>
        <p class="small text-muted mb-0" style="text-align: justify;">
          Ao criar uma visita será enviado ao Apoiador selecionado uma mensagem informando que você deseja fazer uma visita. 
          As Visitas são importantes pois após a realização você poderá fazer um relatório sobre o apoiador visitado que será visto somente pelo Candidato, pelo Coordenador Geral e claro, por você mesmo.
        </p>
      </div>
    </div>
  </div>
</div>

<div class="mobile-card">
  <div class="card-body">
    <%= form_with(model: [:mobile, @visita], local: true) do |f| %>
      <% if @visita.errors.any? %>
        <div class="alert alert-danger">
          <ul class="mb-0">
            <% @visita.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="mb-3" data-controller="apoiador-card">
        <%= f.label :apoiador_id, "Apoiador Visitado", class: "form-label fw-bold" %>
        <%= f.collection_select :apoiador_id, @apoiadores, :id, :nome, 
            { prompt: "Selecione um apoiador" }, 
            { class: "form-select mobile-input", 
              data: { 
                apoiador_card_target: "select", 
                action: "change->apoiador-card#loadCard" 
              } 
            } %>
        
        <div data-apoiador-card-target="container"></div>
      </div>

      <div class="d-grid">
        <%= f.submit "Registrar Visita", class: "btn btn-primary rounded-pill py-2 fw-bold" %>
      </div>
    <% end %>
  </div>
</div>